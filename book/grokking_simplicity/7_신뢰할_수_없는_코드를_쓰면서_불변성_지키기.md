# 불변성이 지켜진 코드와 그렇지 않은 레거시 코드가 안전하게 상호작용하기

## 방어적 복사
copy-on-write 원칙을 지키면서 안전하게 함수를 사용할 수 있는 원칙  
1. 불변성이 지켜진 부분을 안전지대라고 하자.  
2. 안전지대 밖에 있는 가변 데이터를 안전지대로 넣을 때는 깊은 복사를 해야한다.  
3. 반대로 안전지대에서 가변 데이터를 밖으로 꺼낼 때도 깊은 복사를 해야한다.  
결국 데이터가 들어오고 나갈 때 마다 복사한다는 뜻이다.

